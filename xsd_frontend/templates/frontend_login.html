<!doctype html>

<html>

<head>
	<title>xSACdb Login</title>
	<meta charset="utf-8" />
	<link href="/static/css/facebook.css" type="text/css" rel="stylesheet" media="all" />
	<style type="text/css" media="screen">
		* {margin: 0;padding: 0; font-family: 'Helvetica', 'Arial', sans;}
		body {
			background: #4e5b89; /* Old browsers */
background: -moz-linear-gradient(top, #4e5b89 0%, #2d3860 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4e5b89), color-stop(100%,#2d3860)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #4e5b89 0%,#2d3860 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #4e5b89 0%,#2d3860 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #4e5b89 0%,#2d3860 100%); /* IE10+ */
background: linear-gradient(to bottom, #4e5b89 0%,#2d3860 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4e5b89', endColorstr='#2d3860',GradientType=0 ); /* IE6-9 */
			height: 100%;
			overflow: hidden;
		}

		.big-background-1,.big-background-2 {
			width: 150%;
			min-height: 1100px;
			position: absolute;
			top:0;
			left:0;
			

			-webkit-transition: opacity 5s;
			-moz-transition: opacity 5s;     
			transition: opacity 5s; 
		}
		.overlay {
			position: absolute;
			left: 0; top: 0;
			width:100%; height: 100%;
			z-index: -1;
		}
		.big-background-1 {z-index: -10;opacity: 0;}
		.big-background-2 {
			z-index: -20;
			top:-200px;
			left:-400px;
		}

		.login {
			background: white;
			width:550px;
			height: 150px;
			overflow: hidden;
			padding: 16px;
			position: absolute;
			top:40%;
			left:50%;
			margin:-75px 0 0 -275px; 
			opacity: 0.95;
			border-radius: 3px;
		}
		.login-facebook, .login-conventional {
			float: left;
			height: 150px;
		}

		.login-facebook {
			width:60%;
			border-right: 1px solid #f1f1f1;
		}
		.login-facebook img {
			padding: 52px 0 0 45px;
		}

		.login-conventional {
			font-size: 15px;
			padding: 30px 0 0 35px;
		}
		.login-conventional input {
			padding: 3px;
			margin: 4px;	
			width: 100%;
			border: 1px solid #ccc;
			border-radius: 2px;
		}
		#id_username, #id_password {
			width:95%;
		}
		.login-conventional .submit {
			background:#548ac1;
			color:white;
			font-weight: bold;
			border:none;
		}

		
.slow-slide {
  -webkit-animation: slow-slide 50s 1; /* Safari 4+ */
  -moz-animation:    slow-slide 50s 1; /* Fx 5+ */
  -o-animation:      slow-slide 50s 1; /* Opera 12+ */
  animation:         slow-slide 50s 1; /* IE 10+ */
}

@-webkit-keyframes slow-slide {
  100% { -webkit-transform: translate(-400px,-200px); }
}
@-moz-keyframes slow-slide {
  100% { -webkit-transform: translate(-400px,-200px); }
}
@-o-keyframes slow-slide {
  100% { -webkit-transform: translate(-400px,-200px); }
}
@keyframes slow-slide {
  100% { transform: translate(-400px,-200px); }
}
.slow-slide-rev {
  -webkit-animation: slow-slide-rev 50s 1; /* Safari 4+ */
  -moz-animation:    slow-slide-rev 50s 1; /* Fx 5+ */
  -o-animation:      slow-slide-rev 50s 1; /* Opera 12+ */
  animation:         slow-slide-rev 50s 1; /* IE 10+ */
}

@-webkit-keyframes slow-slide-rev {
  100% { -webkit-transform: translate(400px,200px); }
}
@-moz-keyframes slow-slide-rev {
  100% { -webkit-transform: translate(400px,200px); }
}
@-o-keyframes slow-slide-rev {
  100% { -webkit-transform: translate(400px,200px); }
}
@keyframes slow-slide-rev {
  100% { transform: translate(400px,200px); }
}
	</style>
	<script type="text/javascript" src="/media/js/jquery.js"></script>
</head>

<body>
	<img class="big-background-1">
	<img class="big-background-2">
	<div class="overlay"></div>
 	<div class="login">
		<div class="login-facebook">
			<form action="{% url 'facebook_connect' %}?facebook_login=1" method="post">
				<a href="javascript:void(0);" style="font-size: 20px;" onclick="F.connect(this.parentNode);">
					<img src="/media/images/fb_button.png" alt="Login with Facebook" />					
				</a>
				<input type="hidden" value="{{ request.path }}" name="next" />
				<input type="hidden" value="{{ request.path }}" name="register_next" />
				<input type="hidden" value="{{ request.path }}" name="error_next" />
				{% csrf_token %}
			</form>
		</div>
		<div class="login-conventional">
			{% if form.errors %}
			<p>Your username and password didn't match. Please try again.</p>
			{% endif %}
			<form action="" method="post">{% csrf_token %}
				<p><input id="id_username" name="username" type="text" placeholder="Username" /></p>
				<p><input id="id_password" name="password" type="password" placeholder="Password" /></p>
				<input class="submit" type="submit" value="Login" />
			</form>
		</div>

	</div>

	<script src="/media/js/facebook.js" type="text/javascript"></script>
	{% include 'django_facebook/_facebook_js.html' %}

	<script type="text/javascript">
		var images=['/media/images/login_backgrounds/1.jpg','/media/images/login_backgrounds/2.jpg','/media/images/login_backgrounds/3.jpg','/media/images/login_backgrounds/4.jpg','/media/images/login_backgrounds/5.jpg','/media/images/login_backgrounds/6.jpg']
		var i=0
		var i_max=5
		function shuffle(array) {
  			var m = array.length, t, i;
  			// While there remain elements to shuffle
  			while (m) {
    			// Pick a remaining elementâ€¦
    			i = Math.floor(Math.random() * m--);
		    	// And swap it with the current element
    			t = array[m];
    			array[m] = array[i];
    			array[i] = t;
  			}
  			return array;
		}	

		function fadeOutA() {$( ".big-background-1" ).css({"opacity":"0"});}
		function fadeInA() {$( ".big-background-1" ).css({"opacity":"1"});}
		function resetA(){$( ".big-background-1" ).removeClass( "slow-slide" ); nextImageA();}
		function resetB(){$( ".big-background-2" ).removeClass( "slow-slide-rev" ); nextImageB();}
		function startAMoving() {$( ".big-background-1" ).addClass( "slow-slide" );}
		function startBMoving() {$( ".big-background-2" ).addClass( "slow-slide-rev" );}

		function nextImage() {
			next=images[i]
			i++;
			return next
		}
		function nextImageA() {
			$( ".big-background-1" ).attr( "src",nextImage() );
		}
		function nextImageB() {
			$( ".big-background-2" ).attr( "src",nextImage() );
		}

		function again() {
				window.setTimeout(resetB, 10000);
				window.setTimeout(fadeOutA, 30000);
				window.setTimeout(startBMoving, 30000);
				window.setTimeout(resetA, 40000);
				window.setTimeout(fadeInA, 60000);
				window.setTimeout(startAMoving, 60000);
				window.setTimeout(again, 70000);
			}

		$(document).ready(function() {
			images=shuffle(images)
			startAMoving()
			nextImageA()	
			fadeInA();
			again();
		});
</script>
</body>
</html>
